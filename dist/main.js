(()=>{"use strict";function e(e){const t=document.querySelector(".projects");t.innerHTML="";for(let o=0;o<e.length;o++)t.innerHTML+=`\n        <button value="${e[o].valorCat}">${e[o].nombreCat}</button> `,console.log(e[o])}const t=document.querySelector("#categoria"),o=document.querySelector("#eliminar-categoria");function r(){t.innerHTML='\n        <option value="0">Sin Categorizar</option>\n        ',o.innerHTML='\n        <option value="0">Sin Categorizar</option>\n        ';const e={nombreCat:t[0].innerText,valorCat:t[0].value};let r=[];return r.push(e),r}function n(e,t){for(let o=0;o<e.length;o++)e[o].categoria==t?e[o].oculto=!1:e[o].oculto=!0}function a(e,t){t.innerHTML="";for(let o=0;o<e.length;o++)t.innerHTML+=`\n        <option value="${e[o].valorCat}">${e[o].nombreCat}</option>`}const c=document.querySelectorAll(".frecuencia input[type=checkbox]");function l(){for(let e=0;e<c.length;e++)if(c[e].checked)return!0;return!1}let i={};function s(e){const t=document.querySelector(".work-area");t.innerHTML="";for(let o=0;o<e.length;o++)t.innerHTML+=`\n            <div class="tarea">\n                <p><p>\n                <p></p>\n                <p></p>\n                <p></p>                \n                <input type="checkbox">\n                <button value="${o}">Prueba</prueba>\n            </div>`}function u(e){const t=document.querySelectorAll(".tarea");for(let o=0;o<e.length;o++)t[o].children[0].innerText=`${e[o].nombre}`,t[o].children[1].innerText=`${e[o].descripcion}`,t[o].children[2].innerText=`${e[o].dateOdays}`,t[o].children[3].innerText=`${e[o].hora}`,t[o].hidden=e[o].oculto,console.log(e[o].oculto)}function d(e,t,o){e?o.forEach((e=>{e.classList.replace(t,"no-visible")})):o.forEach((e=>{e.classList.replace("no-visible",t)}))}function g(e){e.classList.toggle("no-visible")}console.log("OK");const m=document.querySelectorAll(".cfecha"),f=document.querySelector(".interacciones-menu"),S=document.querySelector("#fecha");f.addEventListener("click",(e=>{switch(e.target.value){case"All/notAll":!function(){c[0].checked=!c[0].checked;for(let e=1;e<c.length;e++)c[e].checked=c[0].checked}(),d(l(),"cfecha",m),S.value="",l()?S.required=!1:S.required=!0;break;case"add-new-tarea":const e=document.querySelector(".add-tarea");S.value="",g(e);break;case"activar-categoria":g(document.querySelector(".add-categoria"))}})),document.querySelector(".frecuencia").addEventListener("change",(e=>{e.target.checked,S.value="",d(l(),"cfecha",m),l()?S.required=!1:S.required=!0}));let h=[];document.querySelector(".add-tarea").addEventListener("submit",(function(e){e.preventDefault();const t=Object.fromEntries(new FormData(e.target));console.log(t),h.push(function(e){let t="";if(""==e.fecha){let o=[];const r=["lun","mar","mie","jue","vie","sab","dom"];for(let t=0;t<r.length;t++)e.hasOwnProperty(r[t])&&o.push(r[t]);t=o.join("-")}else t=e.fecha;return i={nombre:e.nombre,descripcion:e.descripcion,dateOdays:t,hora:e.hora,categoria:e.categoria,check:"-1",cerrar:"-1",oculto:!1},console.log(i),i}(t)),console.log(h),n(h,h[h.length-1].categoria),s(h),u(h),localStorage.setItem("DataTareasMaster",JSON.stringify(h))}));let p=[];window.addEventListener("load",(function(t){if(null==localStorage.getItem("categorias"))p=r(),localStorage.setItem("categorias",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("categorias"));const t=document.querySelector("#categoria");a(p,t);const o=document.querySelector("#eliminar-categoria");a(p,o),e(p),null==localStorage.getItem("DataTareasMaster")?(console.log("DATATAREAS"),h=[{nombre:"Tarea de Muestra",descripcion:"Descripcion de prueba",dateOdays:"lun",hora:"12:00",categoria:"0",check:!1,cerrar:0,oculto:!0}],n(h,"0"),s(h),u(h),localStorage.setItem("DataTareasMaster",JSON.stringify(h))):(h=JSON.parse(localStorage.getItem("DataTareasMaster")),n(h,"0"),s(h),u(h))}})),document.querySelector(".add-categoria").addEventListener("submit",(function(t){t.preventDefault();let o={nombreCat:Object.fromEntries(new FormData(t.target)).categoria,valorCat:`${p.length}`};p.push(o),console.log(p);const r=document.querySelector("#categoria");a(p,r),localStorage.setItem("categorias",JSON.stringify(p));const n=document.querySelector("#eliminar-categoria");a(p,n),e(p)})),document.querySelector(".delete-cat").addEventListener("submit",(function(t){t.preventDefault();const o=Object.fromEntries(new FormData(t.target));p.splice(o.categoria,1);for(let e=0;e<p.length;e++)p[e].valorCat=`${e}`;const n=document.querySelector("#categoria");a(p,n);const c=document.querySelector("#eliminar-categoria");a(p,c),e(p),localStorage.setItem("categorias",JSON.stringify(p)),0==p.length&&(p=r(),localStorage.setItem("categorias",JSON.stringify(p)))})),document.querySelector(".projects").addEventListener("click",(function(e){const t=e.target.value;n(h,t),s(h),u(h),console.log("probandobuttsCATS"),console.log(h)})),document.querySelector(".work-area").addEventListener("click",(function(e){const t=e.target;if("BUTTON"==t.tagName){const e=h[t.value].categoria;h.splice(t.value,1),localStorage.setItem("DataTareasMaster",JSON.stringify(h)),console.log(h),n(h,e),s(h),u(h)}}))})();